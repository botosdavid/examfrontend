datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL")
    relationMode = "prisma"
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id              String  @id @default(cuid())
    name            String
    image           String?
    neptun          String  @unique
    password        String
    role            Role    @default(STUDENT)
    examsCreated    Exam[]  @relation("author")
    examsSubscribed Exam[]  @relation("subscribers")
}

model Answer {
    id         String   @id @default(cuid())
    text       String
    Question   Question @relation(fields: [questionId], references: [id])
    questionId String
}

model Question {
    id      String   @id @default(cuid())
    text    String
    answers Answer[]
    exam    Exam     @relation(fields: [examId], references: [id])
    examId  String
}

model Exam {
    id          String     @id @default(cuid())
    name        String     @unique
    author      User       @relation("author", fields: [authorId], references: [id])
    authorId    String
    questions   Question[]
    date        DateTime
    code        String     @unique
    subscribers User[]     @relation("subscribers")
}

enum Role {
    STUDENT
    TEACHER
    ADMIN
}
